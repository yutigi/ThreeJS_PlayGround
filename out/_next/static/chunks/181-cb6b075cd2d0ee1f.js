"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{1181:function(e,t,i){i.d(t,{D:function(){return w}});var n=i(2212),s=i(9365),o=i(1217),a=i(6591),r=i(4065),y=i(4458),K=i(1259),c=i(3659);function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var d=1,A={Amount:-.005,Volume:1},_=new n.FM8,w=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultPositions=new Map,this.raycaster=new n.iMs,this.PointerDown=function(e){_.x=e.clientX/window.innerWidth*2-1,_.y=-e.clientY/window.innerHeight*2+1,i.raycaster.setFromCamera(_,i.camera);var t=i.raycaster.intersectObjects(i.scene.children);if(t.length>0){console.log(t[0].object);var n=t[0].object;"Keybord_Body_Frame"!=n.name&&(i.KeyPressAction(n.name),i.currentSelect=n.name)}},this.PointerUp=function(e){_.x=e.clientX/window.innerWidth*2-1,_.y=-e.clientY/window.innerHeight*2+1,i.raycaster.setFromCamera(_,i.camera);var t=i.raycaster.intersectObjects(i.scene.children);if(t.length>0){var n=t[0].object;"Keybord_Body_Frame"!=n.name&&i.KeyReleaseAction(n.name)}},this.PointerMove=function(e){_.x=e.clientX/window.innerWidth*2-1,_.y=-e.clientY/window.innerHeight*2+1,i.raycaster.setFromCamera(_,i.camera);var t=i.raycaster.intersectObjects(i.scene.children);if(t.length>0){var n=t[0].object;"Keybord_Body_Frame"!=n.name&&n.name!=i.currentSelect&&(i.KeyReleaseAction(i.currentSelect),i.currentSelect="")}},this.KeyPressAction=function(e,t){var s=void 0!==t&&t,o=i;return i.KeyChronQ2Model.traverse((function(t){if(h(t,n.Kj0)&&t.name===e&&!s){t.getObjectByName(e).position.y=o.defaultPositions.get(e).positionY+A.Amount;var i=o.defaultPositions.get(e).object.children;if(i.length>0){var a=i[0];a.isPlaying&&a.stop(),a.setVolume(A.Volume),a.play()}return!0}})),!1},this.KeyReleaseAction=function(e,t){var s=void 0!==t&&t,o=i;return i.KeyChronQ2Model.traverse((function(t){h(t,n.Kj0)&&(t.name!==e||s||(t.getObjectByName(e).position.y=o.defaultPositions.get(e).positionY))})),!1},this.KeyPress=function(e){console.log(e);e.key;var t=e.code;e.KeyCode;e.preventDefault(),"KeyF"===t?i.KeyPressAction("Key_F",i.F):"Escape"===t?i.KeyPressAction("Key_ESC",i.Backquote):"Tab"===t?i.KeyPressAction("Key_Tap",i.Tab):"CapsLock"===t?i.KeyPressAction("Key_Capslock",i.Capslock):"ShiftLeft"===t?i.KeyPressAction("Key_Shift_L",i.Shift_L):"ShiftRight"===t?i.KeyPressAction("Key_Shift_R",i.Shift_R):"Backspace"===t?i.KeyPressAction("Key_Backspace",i.Backspace):"ArrowUp"===t?i.KeyPressAction("Key_ArrowUp"):"ArrowDown"===t?i.KeyPressAction("Key_ArrowDown"):"ArrowLeft"===t?i.KeyPressAction("Key_ArrowLeft"):"ArrowRight"===t?i.KeyPressAction("Key_ArrowRight"):"ControlLeft"===t?i.KeyPressAction("Key_Control"):"MetaLeft"===t?i.KeyPressAction("Key_Option"):"AltLeft"===t?i.KeyPressAction("Key_Command_L"):"AltRight"===t?i.KeyPressAction("Key_Command_R"):"Delete"===t?i.KeyPressAction("Key_Del"):"Home"===t?i.KeyPressAction("Key_Home"):"KeyQ"===t?i.Q=i.KeyPressAction("Key_Q",i.Q):"KeyW"==t?i.KeyPressAction("Key_W",i.W):"KeyE"==t?i.KeyPressAction("Key_E",i.E):"KeyR"==t?i.KeyPressAction("Key_R",i.R):"KeyT"==t?i.KeyPressAction("Key_T",i.T):"KeyY"==t?i.KeyPressAction("Key_Y",i.Y):"KeyU"==t?i.KeyPressAction("Key_U",i.U):"KeyI"==t?i.KeyPressAction("Key_I",i.I):"KeyO"==t?i.KeyPressAction("Key_O",i.O):"KeyP"==t?i.KeyPressAction("Key_P",i.Y):"BracketLeft"==t?i.KeyPressAction("Key_BracketLeft",i.BracketLeft):"BracketRight"==t?i.KeyPressAction("Key_BracketRight",i.BracketRight):"Backslash"==t?i.KeyPressAction("Key_Backslash",i.Backslash):"KeyA"==t?i.KeyPressAction("Key_A",i.A):"KeyS"==t?i.KeyPressAction("Key_S",i.S):"KeyD"==t?i.KeyPressAction("Key_D",i.D):"KeyG"==t?i.KeyPressAction("Key_G",i.G):"KeyH"==t?i.KeyPressAction("Key_H",i.H):"KeyJ"==t?i.KeyPressAction("Key_J",i.J):"KeyK"==t?i.KeyPressAction("Key_K",i.K):"KeyL"==t?i.KeyPressAction("Key_L",i.L):"Semicolon"==t?i.KeyPressAction("Key_;",i.Semicolon):"Quote"==t?i.KeyPressAction("Key_'",i.Quote):"Enter"==t?i.KeyPressAction("Key_Enter",i.Enter):"KeyZ"==t?i.KeyPressAction("Key_Z",i.Z):"KeyX"==t?i.KeyPressAction("Key_X",i.X):"KeyC"==t?i.KeyPressAction("Key_C",i.C):"KeyV"==t?i.KeyPressAction("Key_V",i.V):"KeyB"==t?i.KeyPressAction("Key_B",i.B):"KeyN"==t?i.KeyPressAction("Key_N",i.N):"KeyM"==t?i.KeyPressAction("Key_M",i.M):"Comma"==t?i.KeyPressAction("Key_<",i.Comma):"Period"==t?i.KeyPressAction("Key_>",i.Period):"Slash"==t?i.KeyPressAction("Key_Slash",i.Slash):"Digit1"==t?i.KeyPressAction("Key_1",i.Digit1):"Digit2"==t?i.KeyPressAction("Key_2",i.Digit2):"Digit3"==t?i.KeyPressAction("Key_3",i.Digit3):"Digit4"==t?i.KeyPressAction("Key_4",i.Digit4):"Digit5"==t?i.KeyPressAction("Key_5",i.Digit5):"Digit6"==t?i.KeyPressAction("Key_6",i.Digit6):"Digit7"==t?i.KeyPressAction("Key_7",i.Digit7):"Digit8"==t?i.KeyPressAction("Key_8",i.Digit8):"Digit9"==t?i.KeyPressAction("Key_9",i.Digit9):"Digit0"==t?i.KeyPressAction("Key_0",i.Digit0):"Minus"==t?i.KeyPressAction("Key_-",i.Minus):"Equal"==t?i.KeyPressAction("Key_=",i.Equal):"Backspace"==t||"Space"==t&&i.KeyPressAction("Key_Spacebar",i.Space)},this.KeyUp=function(e){e.key;var t=e.code;e.KeyCode;"KeyF"===t?i.KeyReleaseAction("Key_F",i.F):"Escape"===t?i.KeyReleaseAction("Key_ESC",i.Backquote):"Tab"===t?i.KeyReleaseAction("Key_Tap",i.Tab):"CapsLock"===t?i.KeyReleaseAction("Key_Capslock",i.Capslock):"ShiftLeft"===t?i.KeyReleaseAction("Key_Shift_L",i.Shift_L):"ShiftRight"===t?i.KeyReleaseAction("Key_Shift_R",i.Shift_R):"Backspace"===t?i.KeyReleaseAction("Key_Backspace",i.Backspace):"ArrowUp"===t?i.KeyReleaseAction("Key_ArrowUp"):"ArrowDown"===t?i.KeyReleaseAction("Key_ArrowDown"):"ArrowLeft"===t?i.KeyReleaseAction("Key_ArrowLeft"):"ArrowRight"===t?i.KeyReleaseAction("Key_ArrowRight"):"ControlLeft"===t?i.KeyReleaseAction("Key_Control"):"MetaLeft"===t?i.KeyReleaseAction("Key_Option"):"AltLeft"===t?i.KeyReleaseAction("Key_Command_L"):"AltRight"===t?i.KeyReleaseAction("Key_Command_R"):"Delete"===t?i.KeyReleaseAction("Key_Del"):"Home"===t?i.KeyReleaseAction("Key_Home"):"KeyQ"===t?(i.Q=i.KeyReleaseAction("Key_Q",i.Q),console.log(i.Q)):"KeyW"===t?i.KeyReleaseAction("Key_W",i.W):"KeyE"===t?i.KeyReleaseAction("Key_E",i.E):"KeyR"==t?i.KeyReleaseAction("Key_R",i.R):"KeyT"==t?i.KeyReleaseAction("Key_T",i.T):"KeyY"==t?i.KeyReleaseAction("Key_Y",i.Y):"KeyU"==t?i.KeyReleaseAction("Key_U",i.U):"KeyI"==t?i.KeyReleaseAction("Key_I",i.I):"KeyO"==t?i.KeyReleaseAction("Key_O",i.O):"KeyP"==t?i.KeyReleaseAction("Key_P",i.Y):"BracketLeft"==t?i.KeyReleaseAction("Key_BracketLeft",i.BracketLeft):"BracketRight"==t?i.KeyReleaseAction("Key_BracketRight",i.BracketRight):"Backslash"==t?i.KeyReleaseAction("Key_Backslash",i.Backslash):"KeyA"==t?i.KeyReleaseAction("Key_A",i.A):"KeyS"==t?i.KeyReleaseAction("Key_S",i.S):"KeyD"==t?i.KeyReleaseAction("Key_D",i.D):"KeyG"==t?i.KeyReleaseAction("Key_G",i.G):"KeyH"==t?i.KeyReleaseAction("Key_H",i.H):"KeyJ"==t?i.KeyReleaseAction("Key_J",i.J):"KeyK"==t?i.KeyReleaseAction("Key_K",i.K):"KeyL"==t?i.KeyReleaseAction("Key_L",i.L):"Semicolon"==t?i.KeyReleaseAction("Key_;",i.Semicolon):"Quote"==t?i.KeyReleaseAction("Key_'",i.Quote):"Enter"==t?i.KeyReleaseAction("Key_Enter",i.Enter):"KeyZ"==t?i.KeyReleaseAction("Key_Z",i.Z):"KeyX"==t?i.KeyReleaseAction("Key_X",i.X):"KeyC"==t?i.KeyReleaseAction("Key_C",i.C):"KeyV"==t?i.KeyReleaseAction("Key_V",i.V):"KeyB"==t?i.KeyReleaseAction("Key_B",i.B):"KeyN"==t?i.KeyReleaseAction("Key_N",i.N):"KeyM"==t?i.KeyReleaseAction("Key_M",i.M):"Comma"==t?i.KeyReleaseAction("Key_<",i.Comma):"Period"==t?i.KeyReleaseAction("Key_>",i.Period):"Slash"==t?i.KeyReleaseAction("Key_Slash",i.Slash):"Digit1"==t?i.KeyReleaseAction("Key_1",i.Digit1):"Digit2"==t?i.KeyReleaseAction("Key_2",i.Digit2):"Digit3"==t?i.KeyReleaseAction("Key_3",i.Digit3):"Digit4"==t?i.KeyReleaseAction("Key_4",i.Digit4):"Digit5"==t?i.KeyReleaseAction("Key_5",i.Digit5):"Digit6"==t?i.KeyReleaseAction("Key_6",i.Digit6):"Digit7"==t?i.KeyReleaseAction("Key_7",i.Digit7):"Digit8"==t?i.KeyReleaseAction("Key_8",i.Digit8):"Digit9"==t?i.KeyReleaseAction("Key_9",i.Digit9):"Digit0"==t?i.KeyReleaseAction("Key_0",i.Digit0):"Minus"==t?i.KeyReleaseAction("Key_-",i.Minus):"Equal"==t?i.KeyReleaseAction("Key_=",i.Equal):"Backspace"==t||"Space"==t&&i.KeyReleaseAction("Key_Spacebar",i.Space)},this.windowResize=function(){i.windowsize.width=window.innerWidth,i.windowsize.height=window.innerHeight,i.camera.aspect=i.windowsize.width/i.windowsize.height,i.camera.updateProjectionMatrix(),i.composer.setSize(i.windowsize.width,i.windowsize.height),i.renderer.setSize(i.windowsize.width,i.windowsize.height)},this.UpdateRender=function(){requestAnimationFrame(i.UpdateRender),i.controls.update(),i.renderer.render(i.scene,i.camera),i.composer.render()},this.canvas=t,this.windowsize={width:window.innerWidth,height:window.innerHeight},this.init(),this.UpdateRender(),window.addEventListener("resize",this.windowResize),window.addEventListener("keydown",this.KeyPress),window.addEventListener("keyup",this.KeyUp),window.addEventListener("pointerdown",this.PointerDown),window.addEventListener("pointerup",this.PointerUp),window.addEventListener("pointermove",this.PointerMove)}var t,i,w;return t=e,(i=[{key:"init",value:function(){var e=this;this.renderer=new n.CP7({canvas:this.canvas,antialias:!0}),this.renderer.setSize(this.windowsize.width,this.windowsize.height),this.renderer.toneMapping=n.LY2,this.renderer.toneMappingExposure=d,this.renderer.physicallyCorrectLights=!0,this.renderer.shadowMap.type=n.ntZ,this.renderer.shadowMap.enabled=!0,this.scene=new n.xsS,this.camera=new n.cPb(50,this.windowsize.width/this.windowsize.height,.001,1e6),this.camera.position.set(0,4,5),this.camera.lookAt(0,0,0),this.composer=new r.xC(this.renderer),this.composer.setSize(this.windowsize.width,this.windowsize.height),this.renderPass=new y.C(this.scene,this.camera),this.bloompass=new a.m(new n.FM8(window.innerWidth,window.innerHeight),5,1,.8),this.composer.addPass(this.renderPass),this.composer.addPass(this.bloompass),this.controls=new s.z(this.camera,this.renderer.domElement),this.controls.update();var t=new n.anP(this.renderer);(new K.I).load("courtyard.exr",(function(i){e.exrCubeRenderTarget=t.fromEquirectangular(i),e.exrBackground=e.exrCubeRenderTarget.texture})),t.compileEquirectangularShader(),(new c.XS).add(A,"Volume",0,3,.01).onChange(this.UpdateRender);var i=new n.cek(16777215,5,100);i.castShadow=!0,i.position.set(3,3,3),this.scene.add(i),new n.xG9(i);var l=new n.PMe(16777215,200,20);l.angle=Math.PI/4,l.position.set(3,15,0),l.lookAt(0,0,0),l.castShadow=!0,l.shadow.camera.near=1,l.shadow.camera.far=this.camera.far,l.shadow.focus=1,l.shadow.mapSize.set(1024,1024),this.scene.add(l),new n.FvO(l);var _=new n.Mig(4210752);_.intensity=5,this.scene.add(_),(new o.E).load("Q2_Model_WIP6.glb",(function(t){var i=e,s=t.scene;s.scale.set(20,20,20),s.traverse((function(e){if(h(e,n.ZAu)&&(i.KeyChronQ2Model=e),h(e,n.Kj0)){console.log(e.name),i.defaultPositions.set(e.name,{positionY:e.position.y,object:e});var t=new n.EJi({map:e.material.map});e.material=t,e.material.roughness=.5,e.material.spacular=.8,e.material.matalness=.9,e.material.envMap=i.exrCubeRenderTarget}})),e.scene.add(s);var o=new n.mTL,a=new n.SJI;e.camera.add(a),o.load("keytap.mp3",(function(e){var t=i;i.defaultPositions.forEach((function(i,s){var o=new n.VYz(a);o.setBuffer(e),t.defaultPositions.get(s).object.add(o)}))}))}))}}])&&l(t.prototype,i),w&&l(t,w),e}()}}]);